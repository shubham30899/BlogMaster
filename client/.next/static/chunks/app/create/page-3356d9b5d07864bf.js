(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[323],{3580:(e,t,s)=>{"use strict";s.d(t,{dj:()=>u});var a=s(2115);let r=0,l=new Map,i=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=n(d,e),o.forEach(e=>{e(d)})}function m(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function u(){let[e,t]=a.useState(d);return a.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},3897:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>O});var a=s(5155),r=s(2115),l=s(5041),i=s(5695),n=s(2177),o=s(221),d=s(7168),c=s(9852),m=s(9474),u=s(968),x=s(2085),p=s(3999);let h=(0,x.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),f=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(u.b,{ref:t,className:(0,p.cn)(h(),s),...r})});f.displayName=u.b.displayName;var g=s(8482),b=s(5784),j=s(3580),v=s(8712),y=s(6777),N=s(9046),w=s(5071),k=s(8338);let S=(0,v.cJ)("users",{id:(0,y.vX)("id").primaryKey(),username:(0,N.Qq)("username").notNull().unique(),password:(0,N.Qq)("password").notNull()}),T=(0,v.cJ)("posts",{id:(0,y.vX)("id").primaryKey(),title:(0,N.Qq)("title").notNull(),slug:(0,N.Qq)("slug").notNull().unique(),author:(0,N.Qq)("author").notNull(),content:(0,N.Qq)("content").notNull(),coverImage:(0,N.Qq)("cover_image"),category:(0,N.Qq)("category"),tags:(0,N.Qq)("tags").array(),publishedDate:(0,w.vE)("published_date").defaultNow(),updatedDate:(0,w.vE)("updated_date").defaultNow()});(0,k.r)(S).pick({username:!0,password:!0});let C=(0,k.r)(T).omit({id:!0,slug:!0,publishedDate:!0,updatedDate:!0});C.partial();var A=s(7550),R=s(2657),_=s(7108),D=s(2486),E=s(5493),P=s(6874),I=s.n(P);function O(){let e=(0,i.useRouter)(),{toast:t}=(0,j.dj)(),[s,u]=(0,r.useState)(!1),x=(0,n.mN)({resolver:(0,o.u)(C),defaultValues:{title:"",author:"",content:"",coverImage:"",category:"",tags:[]}}),p=(0,l.n)({mutationFn:async e=>(await fetch("/api/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json(),onSuccess:s=>{t({title:"Success!",description:"Your post has been published."}),e.push("/posts/".concat(s.post.slug))},onError:e=>{t({title:"Error",description:"Failed to create post. Please try again.",variant:"destructive"})}});x.watch("title");let h=x.watch("content");return(0,a.jsxs)(E.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(I(),{href:"/",className:"flex items-center text-slate-600 hover:text-primary mb-4 transition-colors",children:[(0,a.jsx)(A.A,{className:"w-4 h-4 mr-2"}),"Back to Posts"]}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Create New Post"}),(0,a.jsx)("p",{className:"text-slate-600 dark:text-slate-400 mt-2",children:"Share your story with the world"})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsxs)(d.$,{variant:"outline",size:"sm",onClick:()=>u(!s),children:[(0,a.jsx)(R.A,{className:"w-4 h-4 mr-2"}),s?"Edit":"Preview"]})})]}),(0,a.jsxs)("form",{onSubmit:x.handleSubmit(e=>{p.mutate(e)}),className:"space-y-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(f,{htmlFor:"title",className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Post Title"}),(0,a.jsx)(c.p,{id:"title",placeholder:"Enter your post title...",className:"mt-2 text-lg h-12",...x.register("title")}),x.formState.errors.title&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:x.formState.errors.title.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(f,{htmlFor:"content",className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Content"}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)(m.T,{id:"content",placeholder:'Write your post content here... Use {{block name="product-showcase" image="..." products="sku1,sku2"}} for dynamic blocks',className:"min-h-[400px] text-base leading-relaxed",...x.register("content")}),(0,a.jsxs)("div",{className:"mt-2 text-sm text-slate-500 dark:text-slate-400",children:[(0,a.jsxs)("p",{children:["âœ¨ ",(0,a.jsx)("strong",{children:"Dynamic Blocks:"})," Use special syntax to embed interactive content:"]}),(0,a.jsx)("code",{className:"bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded text-xs",children:'{{block name="product-showcase" image="image-url" products="sku1,sku2"}}'})]})]}),x.formState.errors.content&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:x.formState.errors.content.message})]}),(0,a.jsx)(g.Zp,{className:"bg-blue-50 dark:bg-blue-950/30 border-blue-200 dark:border-blue-800",children:(0,a.jsx)(g.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(_.A,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Dynamic Block Examples"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-blue-700 dark:text-blue-200",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Product Showcase:"}),(0,a.jsx)("code",{className:"block bg-blue-100 dark:bg-blue-900 p-2 rounded mt-1 text-xs",children:'{{block name="tech-gadgets" image="https://images.unsplash.com/tech" products="laptop-pro,wireless-mouse"}}'})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Featured Items:"}),(0,a.jsx)("code",{className:"block bg-blue-100 dark:bg-blue-900 p-2 rounded mt-1 text-xs",children:'{{block name="featured-collection" products="smartphone,tablet-pro,smart-watch"}}'})]})]})]})]})})})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(f,{htmlFor:"author",className:"text-base font-semibold text-slate-900 dark:text-white",children:"Author"}),(0,a.jsx)(c.p,{id:"author",placeholder:"Your name",className:"mt-2",...x.register("author")}),x.formState.errors.author&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:x.formState.errors.author.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(f,{htmlFor:"coverImage",className:"text-base font-semibold text-slate-900 dark:text-white",children:"Cover Image URL"}),(0,a.jsx)(c.p,{id:"coverImage",placeholder:"https://example.com/image.jpg",className:"mt-2",...x.register("coverImage")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(f,{className:"text-base font-semibold text-slate-900 dark:text-white",children:"Category"}),(0,a.jsxs)(b.l6,{onValueChange:e=>x.setValue("category",e),children:[(0,a.jsx)(b.bq,{className:"mt-2",children:(0,a.jsx)(b.yv,{placeholder:"Select a category"})}),(0,a.jsxs)(b.gC,{children:[(0,a.jsx)(b.eb,{value:"technology",children:"Technology"}),(0,a.jsx)(b.eb,{value:"design",children:"Design"}),(0,a.jsx)(b.eb,{value:"development",children:"Development"}),(0,a.jsx)(b.eb,{value:"business",children:"Business"}),(0,a.jsx)(b.eb,{value:"lifestyle",children:"Lifestyle"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(f,{htmlFor:"tags",className:"text-base font-semibold text-slate-900 dark:text-white",children:"Tags (comma-separated)"}),(0,a.jsx)(c.p,{id:"tags",placeholder:"react, typescript, tutorial",className:"mt-2",onChange:e=>{let t=e.target.value.split(",").map(e=>e.trim()).filter(Boolean);x.setValue("tags",t)}})]}),(0,a.jsx)(g.Zp,{children:(0,a.jsxs)(g.Wu,{className:"p-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-slate-900 dark:text-white mb-3",children:"Post Statistics"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-slate-600 dark:text-slate-400",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Word count:"}),(0,a.jsx)("span",{children:(null==h?void 0:h.split(" ").filter(Boolean).length)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Reading time:"}),(0,a.jsxs)("span",{children:[Math.max(1,Math.ceil(((null==h?void 0:h.split(" ").filter(Boolean).length)||0)/200))," min"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Characters:"}),(0,a.jsx)("span",{children:(null==h?void 0:h.length)||0})]})]})]})})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-slate-200 dark:border-slate-700",children:[(0,a.jsx)(d.$,{type:"button",variant:"outline",onClick:()=>e.push("/"),children:"Cancel"}),(0,a.jsx)(d.$,{type:"submit",disabled:p.isPending,className:"bg-primary text-white hover:bg-blue-700",children:p.isPending?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Publishing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(D.A,{className:"w-4 h-4 mr-2"}),"Publish Post"]})})]})]})]})}},3999:(e,t,s)=>{"use strict";s.d(t,{Y:()=>i,cn:()=>l,e:()=>n});var a=s(2596),r=s(9688);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}function i(e){if(!e)return"";let t=new Date(e),s=Math.floor((new Date().getTime()-t.getTime())/36e5);if(s<24)return s<1?"Just now":"".concat(s," hour").concat(s>1?"s":""," ago");let a=Math.floor(s/24);if(a<7)return"".concat(a," day").concat(a>1?"s":""," ago");let r=Math.floor(a/7);return r<4?"".concat(r," week").concat(r>1?"s":""," ago"):t.toLocaleDateString()}function n(e){let t=Math.ceil(e.split(/\s+/).length/200);return"".concat(t," min read")}},5784:(e,t,s)=>{"use strict";s.d(t,{bq:()=>u,eb:()=>f,gC:()=>h,l6:()=>c,yv:()=>m});var a=s(5155),r=s(2115),l=s(2241),i=s(6474),n=s(7863),o=s(5196),d=s(3999);let c=l.bL;l.YJ;let m=l.WT,u=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(l.l9,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...n,children:[r,(0,a.jsx)(l.In,{asChild:!0,children:(0,a.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=l.l9.displayName;let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.PP,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})});x.displayName=l.PP.displayName;let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.wn,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})});p.displayName=l.wn.displayName;let h=r.forwardRef((e,t)=>{let{className:s,children:r,position:i="popper",...n}=e;return(0,a.jsx)(l.ZL,{children:(0,a.jsxs)(l.UC,{ref:t,className:(0,d.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...n,children:[(0,a.jsx)(x,{}),(0,a.jsx)(l.LM,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(p,{})]})})});h.displayName=l.UC.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.JU,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...r})}).displayName=l.JU.displayName;let f=r.forwardRef((e,t)=>{let{className:s,children:r,...i}=e;return(0,a.jsxs)(l.q7,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.VF,{children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})}),(0,a.jsx)(l.p4,{children:r})]})});f.displayName=l.q7.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=l.wv.displayName},7168:(e,t,s)=>{"use strict";s.d(t,{$:()=>d});var a=s(5155),r=s(2115),l=s(9708),i=s(2085),n=s(3999);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:s,variant:r,size:i,asChild:d=!1,...c}=e,m=d?l.DX:"button";return(0,a.jsx)(m,{className:(0,n.cn)(o({variant:r,size:i,className:s})),ref:t,...c})});d.displayName="Button"},8482:(e,t,s)=>{"use strict";s.d(t,{Wu:()=>n,Zp:()=>i});var a=s(5155),r=s(2115),l=s(3999);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});i.displayName="Card",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...r})}).displayName="CardHeader",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})}).displayName="CardTitle",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})}).displayName="CardDescription";let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",s),...r})});n.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},9474:(e,t,s)=>{"use strict";s.d(t,{T:()=>i});var a=s(5155),r=s(2115),l=s(3999);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...r})});i.displayName="Textarea"},9563:(e,t,s)=>{Promise.resolve().then(s.bind(s,3897))},9852:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var a=s(5155),r=s(2115),l=s(3999);let i=r.forwardRef((e,t)=>{let{className:s,type:r,...i}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...i})});i.displayName="Input"}},e=>{var t=t=>e(e.s=t);e.O(0,[148,493,211,577,764,441,684,358],()=>t(9563)),_N_E=e.O()}]);